\section{CIVIS Platform  Development} 
 
The development of the CIVIS platform started in May 2015 \citep{Huang2015c} and continued in the third year's WP3 activities. At the time of writing this deliverable (May/Jun 2016), the development is completed with minor updates took place in the past month.
% 
The JavaScript (JS) programming language\footnote{\url{http://www.crockford.com/javascript/javascript.html}} is used for development at both front- and back-ends. 
The platforms and technologies mentioned in this section are all free and open source. 

\subsection{CIVIS Front-End as a Hybrid Application} 

The CIVIS front-end (YouPower) is developed as a hybrid (cross-platform) mobile application using Ionic\footnote{\url{http://ionicframework.com/}}, an HTML5 front-end development framework built with SASS\footnote{\url{http://sass-lang.com/}} and optimized for AngularJS\footnote{\url{https://angularjs.org/}} (a.k.a Angular). 
% 
The Ionic framework comes with native-styled mobile UI elements and layouts, and handles the look and feel and the UI interactions the app needs in order to be compelling\footnote{\url{http://ionicframework.com/docs/guide/}}. 



Angular as a JavaScript framework provides directives (extensions of HTML attributes) and two-way data binding (binds input or output data of the view to a model) that simplify the app development with Model-View-Controller (MVC) architecture. 
In two-way data binding, the value of a data model is passed on from the view (or loaded from the back-end) to the controller at run-time, and the function in the controller returns the result (of the value manipulation) to the view. 
% 
The noteworthy JS and Angular libraries we use for the front-end development are as follows:
\begin{itemize}
\item Highcharts\footnote{\url{http://www.highcharts.com/}}, a charting library in JS. It provides an easy way to add interactive charts to the application. 
\item Highcharts-ng\footnote{\url{https://github.com/pablojim/highcharts-ng}}, a simple Angular directive for Highcharts. 
\item Angular-translate\footnote{\url{https://angular-translate.github.io/}}, an Angular module for internationalization and localization of the application. (YouPower is currently available in English, Swedish and Italian.)

%\item Underscore.js, handy library that extends JavaScript with useful functions. 
\end{itemize}



\subsection{CIVIS Back-End}

An early version of YouPower\footnote{Branch study-protoype \url{https://github.com/CIVIS-project/YouPower/tree/study-prototype}, 
\url{https://app.civisproject.eu/frontend.html}} has its back-end on Firebase\footnote{\url{https://youpower.firebaseio.com/}} to have a quick set-up.  
For the same reason, the YouPower back-end development is first deployed on Heroku\footnote{\url{https://www.heroku.com/}}. In July 2015, TU Delft finished preparing a virtual machine for CIVIS, so the WP3 back-end is currently hosted by a TU Delft server at {\footnotesize\url{http://civis.tbm.tudelft.nl}}. The CIVIS app back-end interacts with the IT platform developed in WP4, from which it fetches relevant data to be used in the front-end. This is particularly relevant for visualization of energy consumption/production data, energy price data and donation programme data. The availability of such data through the WP4 platform represents therefore a pre-condition for the ability of the app to correctly visualize such information.

The YouPower back-end is developed using the Node.js\footnote{\url{https://nodejs.org/}} platform, a well-known JS based open source runtime environment for server-side applications. 
The platform is easily extensible and has a repository of libraries that support fast web development.
MongoDB\footnote{\url{https://mongodb.org/}} is used as the back-end database. It is document-oriented, and has flexible data schema and expressive query language. 
A list of the data models at the back-end can be found at {\footnotesize\url{https://github.com/CIVIS-project/YouPower/tree/master/backend/models}}. 
Figure~\ref{fig:datamodel} shows the data model schema.
%
\begin{figure}
\centering
\includegraphics[height=\linewidth,angle=90]{img/datamodel_larger}
\caption{YouPower back-end data model schema}
\label{fig:datamodel}
\end{figure} 
% 
The noteworthy Node.js libraries we use for the back-end development are as follows:
\begin{itemize}
\item Async.js\footnote{\url{https://github.com/caolan/async}}, which makes managing and combining asynchronous tasks easier. 
\item Express.js\footnote{\url{http://expressjs.com/}}, a Node.js application server framework we use as a basis for the REST API. 
\item Mocha\footnote{\url{https://mochajs.org/}}, a JavaScript unit test framework. 
\item Mongoose\footnote{\url{http://mongoosejs.com/}}, a MongoDB driver for Node.js. It provides a schema-based solution to model data. 
\item Passport.js\footnote{\url{http://passportjs.org/}}, for handling authentication of REST API requests for Node.js, both local (username password) and Facebook. 
%\item Underscore.js, handy library that extends JavaScript with useful functions. 
\item Ionic Push\footnote{\url{https://apps.ionic.io/landing/push}}, for sending dynamic push notifications. 
\item APIDOC script\footnote{\url{http://apidocjs.com/}}, for inline documentation for the REST API. 
\end{itemize}

The YouPower back-end REST API documentation can be found at {\footnotesize\url{http://civis.tbm.tudelft.nl/apidoc/}}. 
% 


\begin{figure}
\centering
\includegraphics[width=0.9\linewidth]{img/tech}
\caption{WP3}
\label{fig:ScreenShot2015-11-09at18}
\end{figure}


\subsection{Resources}